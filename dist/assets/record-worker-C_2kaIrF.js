(function(){"use strict";(function(){for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)C[s.charCodeAt(o)]=o;var d=function(c){var e,n=new Uint8Array(c),a=n.length,t="";for(e=0;e<a;e+=3)t+=s[n[e]>>2],t+=s[(3&n[e])<<4|n[e+1]>>4],t+=s[(15&n[e+1])<<2|n[e+2]>>6],t+=s[63&n[e+2]];return a%3==2?t=t.substring(0,t.length-1)+"=":a%3==1&&(t=t.substring(0,t.length-2)+"=="),t};const f=new Map,g=new Map,r=self;r.onmessage=async function(c){if(!("OffscreenCanvas"in globalThis))return r.postMessage({id:c.data.id});{const{id:e,bitmap:n,width:a,height:t,dataURLOptions:h}=c.data,M=async function(p,y,B){const u=`${p}-${y}`;if("OffscreenCanvas"in globalThis){if(g.has(u))return g.get(u);const v=new OffscreenCanvas(p,y);v.getContext("2d");const T=await v.convertToBlob(B),U=await T.arrayBuffer(),b=d(U);return g.set(u,b),b}return""}(a,t,h),w=new OffscreenCanvas(a,t);w.getContext("2d").drawImage(n,0,0),n.close();const l=await w.convertToBlob(h),O=l.type,A=await l.arrayBuffer(),i=d(A);if(!f.has(e)&&await M===i)return f.set(e,i),r.postMessage({id:e});if(f.get(e)===i)return r.postMessage({id:e});r.postMessage({id:e,type:O,base64:i,width:a,height:t}),f.set(e,i)}}})()})();
//# sourceMappingURL=record-worker-C_2kaIrF.js.map
